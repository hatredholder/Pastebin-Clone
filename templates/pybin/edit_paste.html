{% extends "base.html" %}
{% block content %}
    {% with messages = get_flashed_messages() %}
        {% if messages %}<div class="notification is-danger">{{ messages[0] }}</div>{% endif %}
    {% endwith %}
    {% if form.content.errors %}
        {% for error in form.content.errors %}{{ error }}{% endfor %}
    {% endif %}
    <form method="POST" action="/edit/{{ paste.paste_hash }}/">
        {{ form.csrf_token }}
        {{ form.content.label }}
        <div class="form-check form-switch ">
            <input style="float:right;
                          margin-right: 10px"
                   class="ms-auto form-check-input"
                   type="checkbox"
                   role="switch"
                   value="off"
                   autocomplete="off"
                   id="onoff"/>
            <label style="float:right"
                   class="form-check-label"
                   for="flexSwitchCheckDefault">Syntax Highlighting</label>
        </div>
        <textarea name="content" class="codemirror-textarea" style="height: 300px; width: 70%;">{{paste.content}}</textarea>
        <div>
            {{ form.category.label }}
            {{ form.category }}
        </div>
        <div>
            {{ form.tags.label }}
            {{ form.tags(placeholder="software, tutorial, data")}}
        </div>
        <div>
            {{ form.syntax.label }}
            {{ form.syntax }}
        </div>
        <div>
            {{ form.paste_expiration.label }}
            {{ form.paste_expiration }}
        </div>
        <div>
            {{ form.paste_exposure.label }}
            {{ form.paste_exposure }}
        </div>
        <div>
            {{ form.title.label }}
            {{ form.title }}
        </div>
        {{ form.submit(value="Save Changes") }}
    </form>
{% endblock %}
{% block scripts %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/codemirror.min.js"></script>
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/codemirror.min.css">
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/theme/material-darker.min.css">
    <script src="{{url_for('static', filename='js/highlighting.js')}}"></script>
{% endblock %}
